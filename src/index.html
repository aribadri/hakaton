<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-status-bar-style" content="#726de3" />
  <meta name="theme-color" content="#726de3" />

  <title>СоюзМультПарк</title>
  <link rel="stylesheet" href="styles/fonts.css">
  <link rel="stylesheet" href="styles/variables.css">
  <link rel="stylesheet" href="./global.css">
  <link rel="stylesheet" href="styles/layout.css">
  <link rel="stylesheet" href="styles/buttons.css">
  <link rel="stylesheet" href="styles/aframe-overrides.css">
  <link rel="stylesheet" href="components/preloader/preloader.css">
  <link rel="stylesheet" href="components/scanner/scanner.css">
  <link rel="stylesheet" href="components/quiz/quiz.css">
  <link rel="stylesheet" href="components/mask/mask.css">


  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-face.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-face-aframe.prod.js"></script>

  <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image-aframe.prod.js"></script>
  <script crossorigin="anonymous"
    src="//cdn.8thwall.com/web/aframe/aframe-particle-system-component-1.1.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  <script type="module" src="index.js"></script>

</head>

<body>
  <!-- <button id="changeARModeBtn" class="">Маска</button> -->

  <!-- <div id="container-mask">
  </div>
  <video id="video-feed">
  </video> -->

  <div id="loader" class="loading-overlay hidden">
    <div class="spinner" role="status" aria-label="Загрузка"></div>
  </div>

  <div id="landscapeWarning" class="landscape-warning hidden">
    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="3" y="5" width="18" height="14" rx="2" stroke="white" stroke-width="2" />
      <path d="M8 2L12 5L16 2" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
    <p>Переверните телефон<br>в вертикальное положение</p>
  </div>

  <button id="quizBtn" class="hidden quiz-trigger-btn">
    Пройти квиз
  </button>

  <!-- Mask button temporarily hidden -->
  <!-- <button id="maskBtn" class="hidden">
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M13.5625 2.17505C13.4285 2.08304 13.2741 2.0252 13.1126 2.00657C12.9512 1.98794 12.7876 2.00909 12.6362 2.06818C11.7594 2.40943 9.98875 2.98193 8 2.98193C6.01125 2.98193 4.24 2.40943 3.36188 2.06818C3.21037 2.00936 3.0468 1.98836 2.88535 2.007C2.7239 2.02563 2.56942 2.08333 2.43529 2.17511C2.30116 2.26689 2.19142 2.38998 2.11557 2.53372C2.03973 2.67746 2.00006 2.83753 2 3.00005V6.48568C2 8.72568 2.60312 10.8388 3.69875 12.4344C4.83375 14.0882 6.36125 14.9969 8 14.9969C9.63875 14.9969 11.1663 14.0863 12.3013 12.4344C13.3969 10.8401 14 8.72693 14 6.48693V3.00005C13.9997 2.83732 13.9597 2.67712 13.8835 2.53335C13.8072 2.38958 13.697 2.26659 13.5625 2.17505ZM4.875 8.33318C4.83121 8.38242 4.77815 8.42256 4.71885 8.4513C4.65955 8.48004 4.59517 8.49682 4.52939 8.50068C4.39653 8.50847 4.26602 8.46317 4.16656 8.37474C4.06711 8.28631 4.00685 8.16199 3.99906 8.02913C3.99126 7.89627 4.03657 7.76576 4.125 7.6663C4.48438 7.26755 5.13625 7.00005 5.75 7.00005C6.36375 7.00005 7.01562 7.26755 7.375 7.6663C7.41879 7.71555 7.45245 7.77294 7.47406 7.83519C7.49566 7.89744 7.5048 7.96334 7.50094 8.02913C7.49708 8.09491 7.4803 8.15929 7.45156 8.21859C7.42282 8.27789 7.38268 8.33095 7.33344 8.37474C7.28419 8.41853 7.2268 8.45219 7.16455 8.47379C7.1023 8.4954 7.0364 8.50454 6.97061 8.50068C6.90483 8.49682 6.84045 8.48004 6.78115 8.4513C6.72185 8.42256 6.66879 8.38242 6.625 8.33318C6.4575 8.14568 6.07188 8.00005 5.75 8.00005C5.42812 8.00005 5.04 8.1463 4.875 8.33318ZM10.5306 11.3244C10.2203 11.6927 9.83322 11.9887 9.39654 12.1917C8.95985 12.3948 8.48408 12.5 8.0025 12.5C7.52092 12.5 7.04515 12.3948 6.60846 12.1917C6.17178 11.9887 5.78473 11.6927 5.47437 11.3244C5.42702 11.2754 5.39019 11.2172 5.36615 11.1534C5.34211 11.0896 5.33137 11.0216 5.33459 10.9535C5.33781 10.8854 5.35493 10.8186 5.38488 10.7574C5.41483 10.6962 5.45699 10.6417 5.50877 10.5973C5.56054 10.553 5.62084 10.5197 5.68596 10.4995C5.75107 10.4793 5.81963 10.4727 5.88741 10.4799C5.95519 10.4872 6.02077 10.5083 6.08012 10.5418C6.13946 10.5754 6.19132 10.6207 6.2325 10.6751C6.4489 10.9334 6.71932 11.1412 7.02469 11.2837C7.33007 11.4263 7.66299 11.5002 8 11.5002C8.33701 11.5002 8.66993 11.4263 8.97531 11.2837C9.28069 11.1412 9.5511 10.9334 9.7675 10.6751C9.85361 10.5742 9.97627 10.5117 10.1085 10.5012C10.2407 10.4908 10.3716 10.5333 10.4725 10.6194C10.5734 10.7055 10.6359 10.8282 10.6463 10.9604C10.6568 11.0926 10.6142 11.2236 10.5281 11.3244H10.5306ZM11.8337 8.37505C11.7848 8.41886 11.7277 8.45259 11.6657 8.47433C11.6037 8.49606 11.5381 8.50536 11.4725 8.5017C11.4069 8.49805 11.3427 8.4815 11.2835 8.45301C11.2243 8.42453 11.1713 8.38465 11.1275 8.33568C10.96 8.14818 10.5744 8.00255 10.2525 8.00255C9.93062 8.00255 9.5425 8.1488 9.3775 8.33568C9.33355 8.38509 9.28029 8.42536 9.22078 8.45418C9.16127 8.48301 9.09666 8.49984 9.03064 8.5037C8.96462 8.50756 8.89849 8.49838 8.83602 8.47668C8.77355 8.45498 8.71597 8.42119 8.66656 8.37724C8.61715 8.33329 8.57688 8.28003 8.54805 8.22052C8.51923 8.161 8.5024 8.09639 8.49854 8.03038C8.49468 7.96436 8.50386 7.89823 8.52556 7.83576C8.54726 7.77329 8.58105 7.71571 8.625 7.6663C8.98188 7.26755 9.63375 7.00005 10.25 7.00005C10.8662 7.00005 11.5156 7.26755 11.875 7.6663C11.9191 7.71543 11.953 7.77279 11.9748 7.83509C11.9966 7.89738 12.0058 7.96338 12.002 8.02927C11.9982 8.09516 11.9813 8.15963 11.9524 8.21898C11.9236 8.27833 11.8832 8.33137 11.8337 8.37505Z" fill="white"/>
    </svg>
  </button> -->

  <button id="panoramaBtn" class="hidden">
    <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="9" stroke="white" stroke-width="2" />
      <line x1="12" y1="3" x2="12" y2="21" stroke="white" stroke-width="2" />
      <line x1="3" y1="12" x2="21" y2="12" stroke="white" stroke-width="2" />
      <ellipse cx="12" cy="12" rx="4" ry="9" stroke="white" stroke-width="1.5" />
    </svg>
  </button>
  <button id="panoramaCloseBtn" class="hidden">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M18 6L6 18M6 6L18 18" stroke="white" stroke-width="2.5" stroke-linecap="round" />
    </svg>
  </button>
  <div class="btn-right hidden">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M9 5L16 12L9 19" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  </div>
  <div class="btn-left hidden">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M15 5L8 12L15 19" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  </div>
  <canvas class="panorama hidden"></canvas>



  <a-scene id="scene-image" mindar-image-system="videoSettings: { facingMode: 'environment', width: 1280, height: 720 }"
    mindar-image="imageTargetSrc: targets/targets-5.mind; filterMinCF:0.00001; uiLoading:#loader; uiScanning: #custom-scanner; filterBeta: 0.001"
    renderer="alpha: true; colorManagement: true; shadow: true" vr-mode-ui="enabled: false"
    device-orientation-permission-ui="enabled: true">

    <a-assets>
      <a-asset-item id="guitarModel" src="models/guitar4.glb"></a-asset-item>
      <a-asset-item id="robotModel" src="models/robot_anim.glb"></a-asset-item>
      <a-asset-item id="boxModel" src="models/box_anim.glb"></a-asset-item>
      <a-asset-item id="rogatkaModel" src="models/rogatka_noanim.glb"></a-asset-item>
      <a-asset-item id="tikvaModel" src="models/tikva.glb"></a-asset-item>

      <a-asset-item id="heliModel" src="models/blue_helicopter_01.glb"></a-asset-item>
      <a-asset-item id="icecreamModel" src="models/ice_cream_01.glb"></a-asset-item>


      <img id="bblTexture" src="textures/bbl.png" />
      <img id="arrowTexture" src="textures/arrow.png" />

    </a-assets>


    <!-- 7 якорей -->
    <a-entity id="anchor-0" mindar-image-target="targetIndex: 0"></a-entity>
    <a-entity id="anchor-1" mindar-image-target="targetIndex: 1"></a-entity>
    <a-entity id="anchor-2" mindar-image-target="targetIndex: 2"></a-entity>
    <a-entity id="anchor-3" mindar-image-target="targetIndex: 3"></a-entity>
    <a-entity id="anchor-4" mindar-image-target="targetIndex: 4"></a-entity>
    <a-entity id="anchor-5" mindar-image-target="targetIndex: 5"></a-entity>
    <a-entity id="anchor-6" mindar-image-target="targetIndex: 6"></a-entity>


    <!-- снег -->
    <a-camera position="0 0 0" look-controls="enabled: false">
      <a-entity id="particles1" scale="1 1 1"
        particle-system="preset: snow; particleCount: 4000; accelerationValue: 0 -1.8 0; rotationAngle: 3.14; rotationAxis: Z; velocitySpread: 1 0 1; velocityValue: 0 0 0; color: #ffffff;">
      </a-entity> <a-entity id="particles2" scale="1 1 1"
        particle-system="preset: snow; particleCount: 4000; accelerationValue: 0 -0.8 0; rotationAngle: 3.14; rotationAxis: Z; velocitySpread: 1 0 1; velocityValue: 0 0 0; color: #ffffff;"></a-entity>
    </a-camera>



  </a-scene>

  <!-- Quiz Modal -->
  <div id="quizModal" class="quiz-modal hidden">
    <div class="quiz-container">
      <!-- Header -->
      <div class="quiz-header">
        <h2>Как хорошо вы знаете СоюзМультфильм?</h2>
        <button id="quizCloseBtn" class="quiz-close-btn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="white" stroke-width="2.5" stroke-linecap="round" />
          </svg>
        </button>
      </div>

      <!-- Progress -->
      <div class="quiz-progress">
        <div class="quiz-progress-bar" id="progressBar"></div>
        <span class="quiz-progress-text" id="progressText">Вопрос 1 из 5</span>
      </div>

      <!-- Question Screen -->
      <div id="questionScreen" class="quiz-screen">
        <h3 id="questionText" class="quiz-question"></h3>
        <div id="answersContainer" class="quiz-answers"></div>
      </div>

      <!-- Result Screen -->
      <div id="resultScreen" class="quiz-screen hidden">
        <div class="quiz-result">
          <h3 id="resultTitle"></h3>
          <p id="resultDescription"></p>
          <div class="quiz-score">
            <span id="scoreText"></span>
          </div>
          <button id="restartBtn" class="quiz-btn-primary">Пройти еще раз</button>
        </div>
      </div>
    </div>
  </div>

</body>

</html>