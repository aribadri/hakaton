<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-status-bar-style" content="#726de3" />
  <meta name="theme-color" content="#726de3" />

  <title>СоюзМультПарк</title>
  <link rel="stylesheet" href="styles/variables.css">
  <link rel="stylesheet" href="styles/layout.css">
  <link rel="stylesheet" href="styles/buttons.css">
  <link rel="stylesheet" href="styles/aframe-overrides.css">
  <link rel="stylesheet" href="components/preloader/preloader.css">
  <link rel="stylesheet" href="components/scanner/scanner.css">
  <link rel="stylesheet" href="components/quiz/quiz.css">
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image-aframe.prod.js"></script>
  <script crossorigin="anonymous"
    src="//cdn.8thwall.com/web/aframe/aframe-particle-system-component-1.1.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  <script crossorigin="anonymous" type="module" src="index.js"></script>


</head>

<body>
  <div id="loader" class="loading-overlay hidden">
    <div class="spinner" role="status" aria-label="Загрузка"></div>
  </div>

  <button id="quizBtn" class="hidden quiz-trigger-btn">
    Пройти квиз
  </button>

  <button id="panoramaBtn" class="hidden">
    <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="9" stroke="white" stroke-width="2" />
      <line x1="12" y1="3" x2="12" y2="21" stroke="white" stroke-width="2" />
      <line x1="3" y1="12" x2="21" y2="12" stroke="white" stroke-width="2" />
      <ellipse cx="12" cy="12" rx="4" ry="9" stroke="white" stroke-width="1.5" />
    </svg>
  </button>
  <button id="panoramaCloseBtn" class="hidden">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M18 6L6 18M6 6L18 18" stroke="white" stroke-width="2.5" stroke-linecap="round" />
    </svg>
  </button>
  <div class="btn-right hidden">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M9 5L16 12L9 19" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  </div>
  <div class="btn-left hidden">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M15 5L8 12L15 19" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  </div>
  <canvas class="panorama hidden"></canvas>



  <a-scene mindar-image-system="videoSettings: { facingMode: 'environment', width: 1280, height: 720 }"
    mindar-image="imageTargetSrc: targets/targets-5.mind; filterMinCF:0.00001; uiLoading:#loader; uiScanning: #custom-scanner; filterBeta: 0.001"
    renderer="alpha: true; colorManagement: true; shadow: true" vr-mode-ui="enabled: false"
    device-orientation-permission-ui="enabled: true">

    <a-assets>
      <a-asset-item id="guitarModel" src="models/guitar4.glb"></a-asset-item>
      <a-asset-item id="robotModel" src="models/robot_anim.glb"></a-asset-item>
      <a-asset-item id="boxModel" src="models/box_anim.glb"></a-asset-item>
      <a-asset-item id="rogatkaModel" src="models/rogatka_noanim.glb"></a-asset-item>
      <a-asset-item id="tikvaModel" src="models/tikva.glb"></a-asset-item>
      <img id="bblTexture" src="textures/bbl.png" />
    </a-assets>


    <!-- 7 якорей -->
    <a-entity id="anchor-0" mindar-image-target="targetIndex: 0"></a-entity>
    <a-entity id="anchor-1" mindar-image-target="targetIndex: 1"></a-entity>
    <a-entity id="anchor-2" mindar-image-target="targetIndex: 2"></a-entity>
    <a-entity id="anchor-3" mindar-image-target="targetIndex: 3"></a-entity>
    <a-entity id="anchor-4" mindar-image-target="targetIndex: 4"></a-entity>
    <a-entity id="anchor-5" mindar-image-target="targetIndex: 5"></a-entity>
    <a-entity id="anchor-6" mindar-image-target="targetIndex: 6"></a-entity>


    <!-- снег -->
    <a-camera position="0 0 0" look-controls="enabled: false">
      <a-entity id="particles1" scale="1 1 1"
        particle-system="preset: snow; particleCount: 4000; accelerationValue: 0 -1.8 0; rotationAngle: 3.14; rotationAxis: Z; velocitySpread: 1 0 1; velocityValue: 0 0 0; color: #ffffff;">
      </a-entity> <a-entity id="particles2" scale="1 1 1"
        particle-system="preset: snow; particleCount: 4000; accelerationValue: 0 -0.8 0; rotationAngle: 3.14; rotationAxis: Z; velocitySpread: 1 0 1; velocityValue: 0 0 0; color: #ffffff;"></a-entity>
    </a-camera>



  </a-scene>

  <!-- Quiz Modal -->
  <div id="quizModal" class="quiz-modal hidden">
    <div class="quiz-container">
      <!-- Header -->
      <div class="quiz-header">
        <h2>Как хорошо вы знаете СоюзМультфильм?</h2>
        <button id="quizCloseBtn" class="quiz-close-btn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <!-- Progress -->
      <div class="quiz-progress">
        <div class="quiz-progress-bar" id="progressBar"></div>
        <span class="quiz-progress-text" id="progressText">Вопрос 1 из 5</span>
      </div>

      <!-- Question Screen -->
      <div id="questionScreen" class="quiz-screen">
        <h3 id="questionText" class="quiz-question"></h3>
        <div id="answersContainer" class="quiz-answers"></div>
      </div>

      <!-- Result Screen -->
      <div id="resultScreen" class="quiz-screen hidden">
        <div class="quiz-result">
          <h3 id="resultTitle"></h3>
          <p id="resultDescription"></p>
          <div class="quiz-score">
            <span id="scoreText"></span>
          </div>
          <button id="restartBtn" class="quiz-btn-primary">Пройти еще раз</button>
        </div>
      </div>
    </div>
  </div>

</body>

</html>